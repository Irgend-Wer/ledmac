\documentclass[a4paper, oneside, notitlepage, 12pt]{article}
\usepackage{fontspec}
\usepackage{libertineotf}
\usepackage{xunicode}
\usepackage{polyglossia}
\setmainlanguage{french}
\makeatletter
\usepackage{eledmac}
\usepackage[shiftedpstarts]{eledpar}
\numdef{\titi}{1}

\firstlinenum*{1} \linenumincrement*{1}

%\renewcommand*{\goalfraction}{0.922}
\renewcommand{\hangingsymbol}{[\,}
\title{}
\date{}
\author{}
%
\begin{document}

\makeatletter
\def\toto#1{\titi\edlabel{ledsc\titi}\global\numdef{\titi}{\titi+1}\relax#1\section{#1}}

\def\@sect#1#2#3#4#5#6[#7]#8{%
  \let\edtext=\dummy@edtext
  \ifnum #2>\c@secnumdepth
    \let\@svsec\@empty
  \else
    \refstepcounter{#1}%
    \protected@edef\@svsec{\@seccntformat{#1}\relax}%
  \fi
  \@tempskipa #5\relax
  \ifdim \@tempskipa>\z@
    \begingroup
      #6{%
        \@hangfrom{\hskip #3 \llap{\numlabfont\ledlinenum\kern\linenumsep} \relax\@svsec}%
          \interlinepenalty \@M #8\@@par}%
    \endgroup
    \csname #1mark\endcsname{#7}%
    \addcontentsline{toc}{#1}{%
      \ifnum #2>\c@secnumdepth \else
        \protect\numberline{\csname the#1\endcsname}%
      \fi
      #7}%
  \else
    \def\@svsechd{%
      #6{\hskip #3\relax
      \@svsec #8}%
      \csname #1mark\endcsname{#7}%
      \addcontentsline{toc}{#1}{%
        \ifnum #2>\c@secnumdepth \else
          \protect\numberline{\csname the#1\endcsname}%
        \fi
        #7}}%
  \fi
  \@xsect{#5}}
  \numdef{\led@section@num}{0}
\newcommand{\led@section}[2]{
	%\global\csdef{section@#2}
			%{\section{#1}}
			}

\newwrite\ledsec@out

\def\test#1{%
  \numdef{\tmp}{\c@pstart}%
  \immediate\write\ledsec@out{%
  \string\csdef{lsection@\tmp}{\string\section{\unexpanded{#1}}}
  }}

\renewcommandx*{\pend}[1][1]{\ifnumbering \else%
    \led@err@PendNotNumbered%
  \fi%
  \ifnumberedpar@ \else%
    \led@err@PendNoPstart%
  \fi%
  \l@dzeropenalties%
  \endgraf\global\num@lines=\prevgraf\egroup%
  \global\par@line=0%
  \csnumdef{pstartline}{0}%
  \loop\ifvbox\raw@text%
    \csnumdef{pstartline}{\pstartline+1}%
    \do@line%
    \ifbypstart@%
     \ifnumequal{\pstartline}{1}{\setline{1}\resetprevline@}{}%
    \fi%
  \repeat%
  \flush@notes%
  \endgroup%
  \ignorespaces%
  \ifnumberpstart%
   \pstartnumtrue%
   \fi%
  \@oldnobreak%
  \numdef{\tmp}{\c@pstart}%
    \csuse{lsection@\tmp}%
  \addtocounter{pstart}{1}%
  #1
  }

\def\led@section#1#2{\global\csdef{ledsection@#2}{\section{#1}}}
\input{issue165-essaie-resolution.s}
\beginnumbering
\immediate\openout\ledsec@out=\jobname.s
\pstart
\test{\edtext{a}{\Afootnote{B}}}
\pend
\pstart
I use git to manage some package.
I would like to add a pre-commit hook, to check if I have forgotten
For now, I have a minimal pre-commit, which test only the blank spaces at ends of lines, but not the forgotten.
\pend
\pstart
\test{b}
\pend
  \immediate\closeout\ledsec@out

\endnumbering





\end{document}
